(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,a){e.exports=a(36)},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),s=a.n(c),o=a(3),l=a(2),m=a.n(l),u="/api/persons",i=function(){return m.a.get(u)},d=function(e){return m.a.post(u,e)},f=function(e,t){return m.a.put("".concat(u,"/").concat(e),t)},b=function(e){return m.a.delete("".concat(u,"/").concat(e))},p=function(e){var t=e.person,a=e.persons,n=e.setPersons,c=e.setConfMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-danger btn-sm ",onClick:function(){var e=t.id;if(window.confirm("Delete ".concat(t.name," ?"))){b(t.id).then((function(e){})).catch((function(e){console.log(e),c("".concat(t.name," has already been deleted from the server"))}));var r=a.filter((function(t){return t.id!==e}));n(r)}}},"Delete"))},N=function(e){var t=e.persons,a=e.newFilter,n=e.setPersons,c=e.setConfMessage,s=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())}));return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"display-4"},"Numbers"),r.a.createElement("table",{className:"table table-bordered table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",{className:"d-flex"},r.a.createElement("th",{className:"col-4"},"Name"),r.a.createElement("th",{className:"col-4"},"Number"),r.a.createElement("th",{className:"col-4"},"Delete?"))),r.a.createElement("tbody",null,s.map((function(e){return r.a.createElement("tr",{key:e.id,className:"d-flex"},r.a.createElement("td",{className:"col-4"},e.name," "),r.a.createElement("td",{className:"col-4"},e.number),r.a.createElement("td",{className:"col-4 "},r.a.createElement(p,{person:e,persons:t,setPersons:n,setConfMessage:c})))})))))},E=function(e){var t=e.newName,a=e.newNumber,n=e.setNewName,c=e.setNewNumber,s=e.persons,o=e.setPersons,l=e.setConfMessage;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"display-4"},"Add To Phonebook"),r.a.createElement("form",{className:"form-group",onSubmit:function(e){e.preventDefault();var r={name:t,number:a},m=s.find((function(e){return e.name===r.name}));m?window.confirm("".concat(t," is already in the phonebook, would you like to replace their number with a new one?"))&&(f(m.id,r).then((function(e){return o(s.map((function(t){return t.id!==m.id?t:e.data})))})),l("Added new number to ".concat(r.name))):(d(r).then((function(e){o(s.concat(e.data)),l("Added ".concat(r.name))})).catch((function(e){return l(String(e))})),n(""),c(""))}},r.a.createElement("div",null,"Name:"," ",r.a.createElement("input",{className:"input-group mb-3 max-width: 567px",value:t,onChange:function(e){n(e.target.value)}})),r.a.createElement("div",null,"Number:"," ",r.a.createElement("input",{className:"input-group mb-3",value:a,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Add Person"))))},h=function(e){var t=e.message,a=e.setMessage;return null===t?null:(setTimeout((function(){a(null)}),4e3),t.includes("Added")?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"alert alert-success mb-3"},t)):r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"alert alert-danger"},t)))},g=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),m=l[0],u=l[1],d=Object(n.useState)(""),f=Object(o.a)(d,2),b=f[0],p=f[1],g=Object(n.useState)(""),v=Object(o.a)(g,2),w=v[0],C=v[1],O=Object(n.useState)(null),j=Object(o.a)(O,2),y=j[0],k=j[1];Object(n.useEffect)((function(){i().then((function(e){c(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement(h,{message:y,setMessage:k}),r.a.createElement("h1",{className:"display-3 text-center"},"Phonebook"),r.a.createElement(E,{newName:m,newNumber:b,setNewName:u,setNewNumber:p,persons:a,setPersons:c,setConfMessage:k}),r.a.createElement("div",{className:"container "},"Filter: ",r.a.createElement("input",{value:w,onChange:function(e){C(e.target.value)}})),r.a.createElement(N,{persons:a,newFilter:w,setPersons:c,setConfMessage:k}))};m.a.get("api/persons").then((function(e){var t=e.data;s.a.render(r.a.createElement(g,{persons:t}),document.getElementById("root"))}))}},[[14,1,2]]]);
//# sourceMappingURL=main.4cbc5133.chunk.js.map